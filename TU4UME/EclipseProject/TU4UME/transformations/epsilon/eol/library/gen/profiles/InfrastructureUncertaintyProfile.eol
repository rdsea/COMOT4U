import "../../element.eol";

//stereotype libraries
import	"../stereotypes/InfrastructureUncertaintyProfile/InfrastructureLevelUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/StorageUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/DataDeliveryUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/ElasticityUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/ActuationUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/ExecutionEnvironmentUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/StorageDependabilityUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/MonitoringDataUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/ActuationBehaviorUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/RuntimeExecutionEnvironmentUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/GovernanceUncertainty.eol";
import	"../stereotypes/InfrastructureUncertaintyProfile/UncertaintyFamily.eol";


//stereotype operations

operation Profile getInfrastructureLevelUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var infrastructureLevelUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "InfrastructureLevelUncertainty");
	return infrastructureLevelUncertaintyStereotype;
}

operation Profile getInfrastructureLevelUncertainty() : InfrastructureLevelUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var infrastructureLevelUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "InfrastructureLevelUncertainty");
	return infrastructureLevelUncertaintyStereotype;
}


operation Profile getStorageUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var storageUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "StorageUncertainty");
	return storageUncertaintyStereotype;
}

operation Profile getStorageUncertainty() : StorageUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var storageUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "StorageUncertainty");
	return storageUncertaintyStereotype;
}


operation Profile getDataDeliveryUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var dataDeliveryUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "DataDeliveryUncertainty");
	return dataDeliveryUncertaintyStereotype;
}

operation Profile getDataDeliveryUncertainty() : DataDeliveryUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var dataDeliveryUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "DataDeliveryUncertainty");
	return dataDeliveryUncertaintyStereotype;
}


operation Profile getElasticityUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var elasticityUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "ElasticityUncertainty");
	return elasticityUncertaintyStereotype;
}

operation Profile getElasticityUncertainty() : ElasticityUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var elasticityUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "ElasticityUncertainty");
	return elasticityUncertaintyStereotype;
}


operation Profile getActuationUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var actuationUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "ActuationUncertainty");
	return actuationUncertaintyStereotype;
}

operation Profile getActuationUncertainty() : ActuationUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var actuationUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "ActuationUncertainty");
	return actuationUncertaintyStereotype;
}


operation Profile getExecutionEnvironmentUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var executionEnvironmentUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "ExecutionEnvironmentUncertainty");
	return executionEnvironmentUncertaintyStereotype;
}

operation Profile getExecutionEnvironmentUncertainty() : ExecutionEnvironmentUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var executionEnvironmentUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "ExecutionEnvironmentUncertainty");
	return executionEnvironmentUncertaintyStereotype;
}


operation Profile getStorageDependabilityUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var storageDependabilityUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "StorageDependabilityUncertainty");
	return storageDependabilityUncertaintyStereotype;
}

operation Profile getStorageDependabilityUncertainty() : StorageDependabilityUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var storageDependabilityUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "StorageDependabilityUncertainty");
	return storageDependabilityUncertaintyStereotype;
}


operation Profile getMonitoringDataUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var monitoringDataUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "MonitoringDataUncertainty");
	return monitoringDataUncertaintyStereotype;
}

operation Profile getMonitoringDataUncertainty() : MonitoringDataUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var monitoringDataUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "MonitoringDataUncertainty");
	return monitoringDataUncertaintyStereotype;
}


operation Profile getActuationBehaviorUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var actuationBehaviorUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "ActuationBehaviorUncertainty");
	return actuationBehaviorUncertaintyStereotype;
}

operation Profile getActuationBehaviorUncertainty() : ActuationBehaviorUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var actuationBehaviorUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "ActuationBehaviorUncertainty");
	return actuationBehaviorUncertaintyStereotype;
}


operation Profile getRuntimeExecutionEnvironmentUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var runtimeExecutionEnvironmentUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "RuntimeExecutionEnvironmentUncertainty");
	return runtimeExecutionEnvironmentUncertaintyStereotype;
}

operation Profile getRuntimeExecutionEnvironmentUncertainty() : RuntimeExecutionEnvironmentUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var runtimeExecutionEnvironmentUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "RuntimeExecutionEnvironmentUncertainty");
	return runtimeExecutionEnvironmentUncertaintyStereotype;
}


operation Profile getGovernanceUncertaintyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var governanceUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "GovernanceUncertainty");
	return governanceUncertaintyStereotype;
}

operation Profile getGovernanceUncertainty() : GovernanceUncertainty {
	var ownedStereotypes = self.getOwnedStereotypes();
	var governanceUncertaintyStereotype = ownedStereotypes.selectOne(s|s.name = "GovernanceUncertainty");
	return governanceUncertaintyStereotype;
}


operation Profile getUncertaintyFamilyStereotype() : Stereotype {
	var ownedStereotypes = self.getOwnedStereotypes();
	var uncertaintyFamilyStereotype = ownedStereotypes.selectOne(s|s.name = "UncertaintyFamily");
	return uncertaintyFamilyStereotype;
}

operation Profile getUncertaintyFamily() : UncertaintyFamily {
	var ownedStereotypes = self.getOwnedStereotypes();
	var uncertaintyFamilyStereotype = ownedStereotypes.selectOne(s|s.name = "UncertaintyFamily");
	return uncertaintyFamilyStereotype;
}



/*
Returns a Sequence of Element annotated with InfrastructureLevelUncertainty.
*/ 
operation Package InfrastructureLevelUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("InfrastructureLevelUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with InfrastructureLevelUncertainty.
*/ 
operation Package InfrastructureLevelUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("InfrastructureLevelUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with StorageUncertainty.
*/ 
operation Package StorageUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("StorageUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with StorageUncertainty.
*/ 
operation Package StorageUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("StorageUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with DataDeliveryUncertainty.
*/ 
operation Package DataDeliveryUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("DataDeliveryUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with DataDeliveryUncertainty.
*/ 
operation Package DataDeliveryUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("DataDeliveryUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with ElasticityUncertainty.
*/ 
operation Package ElasticityUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("ElasticityUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with ElasticityUncertainty.
*/ 
operation Package ElasticityUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("ElasticityUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with ActuationUncertainty.
*/ 
operation Package ActuationUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("ActuationUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with ActuationUncertainty.
*/ 
operation Package ActuationUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("ActuationUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with ExecutionEnvironmentUncertainty.
*/ 
operation Package ExecutionEnvironmentUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("ExecutionEnvironmentUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with ExecutionEnvironmentUncertainty.
*/ 
operation Package ExecutionEnvironmentUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("ExecutionEnvironmentUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with StorageDependabilityUncertainty.
*/ 
operation Package StorageDependabilityUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("StorageDependabilityUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with StorageDependabilityUncertainty.
*/ 
operation Package StorageDependabilityUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("StorageDependabilityUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with MonitoringDataUncertainty.
*/ 
operation Package MonitoringDataUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("MonitoringDataUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with MonitoringDataUncertainty.
*/ 
operation Package MonitoringDataUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("MonitoringDataUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with ActuationBehaviorUncertainty.
*/ 
operation Package ActuationBehaviorUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("ActuationBehaviorUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with ActuationBehaviorUncertainty.
*/ 
operation Package ActuationBehaviorUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("ActuationBehaviorUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with RuntimeExecutionEnvironmentUncertainty.
*/ 
operation Package RuntimeExecutionEnvironmentUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("RuntimeExecutionEnvironmentUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with RuntimeExecutionEnvironmentUncertainty.
*/ 
operation Package RuntimeExecutionEnvironmentUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("RuntimeExecutionEnvironmentUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Element annotated with GovernanceUncertainty.
*/ 
operation Package GovernanceUncertaintysAsSequenceOfElement() : Sequence(Element){
	var returnValue = new Sequence(Element);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("GovernanceUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Classifier annotated with GovernanceUncertainty.
*/ 
operation Package GovernanceUncertaintysAsSequenceOfClassifier() : Sequence(Classifier){
	var returnValue = new Sequence(Classifier);
	for(son in self.getPackagedElements()){
		if(son.hasStereotype("GovernanceUncertainty")){
			returnValue.add(son);
		}
	}
	return returnValue;
}

/*
Returns a Sequence of Property defined by the given stereotype.
*/ 
operation Element getStereotypeAttributes(stereotype : Stereotype) : Sequence(Property){
	var stereotypeAttr = stereotype.allAttributes();
	var returnValue : Sequence(Property) = new Sequence(Property);
	
	for(attr in stereotypeAttr){
		if(not attr.name.startsWith("base_"))
		{ 
			returnValue.add(attr);
		}
	}
	return returnValue;	
}

/*
Check the type of the base element.
*/ 
operation Element isInstanceSpecification() : Boolean {

	if(self.isUndefined() or self.getAppliedStereotypes().isUndefined() ){
		("the element is undefined").println();
		showError("Method: isInstanceOfMetaclass() : Boolean");
	}
	var eclass_name = self.type.name;
	if (eclass_name = "InstanceSpecification"){
		return true;
	}
	return false;
}
/*
Check the type of the base element.
*/ 
operation Element isClass() : Boolean {

	if(self.isUndefined() or self.getAppliedStereotypes().isUndefined() ){
		("the element is undefined").println();
		showError("Method: isInstanceOfMetaclass() : Boolean");
	}
	var eclass_name = self.type.name;
	if (eclass_name = "Class"){
		return true;
	}
	return false;
}

